---
date: 2024-12-18
datetime: 2024-12-18 21:09:57
book: 
page: 
tags: 
references: 
aliases:
---
- 계보를 확인하기
	- 무엇이 고장 났는지 이해하기 위해 '시스템의 최상단에 있는 업스트림 노드'를 찾아야 함
	- 해당 노드가 문제의 시작점
- 코드를 확인하기
	- 태이블, 특정 필드 또는 사건에 영향을 미치는 필드를 들여다보면 가설을 세우는데 도움이 됨 
- 데이터를 확인하기
	- 1,2 단계를 거치면 데이터를 자세히 살펴봄으로써 문제가 될 수 있는 힌트 찾기
	- 시도해볼만 접근법
		- **비정상적인 데이터 값을 가진 테이블의 다른 필드**가
		- 데이터 이상을 일으키는 원인에 대한 단서가 되는지
- 운영 환경을 살펴보기
	- ETL 엔진의 로그 및 오류 트레이스를 확인하기
- 동료를 활용하기
	- 동료들은 문제를 파악하기 위한 어느정도 인사이트를 가지고 있음

### 1. 계보를 확인하기
- 데이터 문제 해결을 위해 모든 사용자(DE, DA, DS 등)이 **최신 계보**에 접근할 수 있어야 함
- BI 보고서, ML 및 reverse ETL 싱크와 같은 **데이터 프로덕트**를 계보에 포함해야 함
- **필드 레벨의 계보**가 있다면 도움이 됨

### 2. 코드를 확인하기
- ETL, ELT 프로세스에서 이 테이블이 어떻게 생성 되었는지 이해
- 테이블 생성 로직, 및 필드나 테이블 메타 데이터를 살펴보면 그럴듯한 가설을 세울 수 있음
	- 최근에 어떤 코드로 테이블 업데이트 했는가
	- 연관 필드는 언제 계싼되었는가, 현재 로직에서 어떤 것이 '잘못된' 데이터를 만들었을까
	- 최근에 로직이 변경되어 문제가 발생할 가능성이 있는가
	- 테이블에 임시로 작성한 내용이 있는가, 최근에 다시 채워 졌는가

#### TIP
- 데이터 문제를 해결하는 모든 사용자가, 테이블을 생성한 로직(SQL, Spark) 등을 빠르게 추적할 수 있어야 함
- 코드가 어떻게 생겼는지 뿐만 아니라
	- 테이블을 마지막으로 업데이트 했을 때 코드, 업데이트 발생 시점도 알아야 함
- 데이터 백필 및 임시 데이터 활용도 고려해야 함

### 3. 데이터 확인하기
- 질문
	- 모든 기록의 값이 잘못 되었는가, 몇몇 기록만 잘못 되었는가
	- 특정 기간만 데이터가 잘못 되었는가
	- 데이터가 특정 집합에 관해서만 잘못 되었는가
	- 데이터의 새로운 군집 혹은 누락된 군집이 있는가
	- 최근 변경된 스키마로 문제가 발생했는가
	- 데이터 숫자 단위, 시간 단위가 변했느가
- **비정상적인 기록을 가진 테이블의 다른 필드가 데이터 이상이 발생하는 원인의 단서를 제공하는가**
- `NULL`의 비율과 같이 **이상치의 통계적 확산에 대한 시각화 작업**은 근본 원인을 찾아내는데 도움이 됨

#### TIP
- 데이터 문제를 해결하는 모든 사람은
	- 데이터의 다양한 세그먼트, 기간, 기타 데이터 조각들과 어떻게 관련되어 있는지
	- 데이터를 손쉽게 쪼개어 분석할 수 있어야 함
- 데이터 또는 스키마의 최근 변경 사항을 시각화 할 수 있어야 함

### 4. 운영 환경을 살펴보기
- dbt
- ETL 엔진의 로그 및 오류 트레이스 확인
	- 작업에 오류가 있는가
	- 작업 시작에 비정상적인 지연이 있는가
	- 오래 실행되는 쿼리나 성능이 낮은 작업으로 인해 지연이 발생하는가
	- 실행에 영향을 미치는 권한, 네트워킹, 인프라 문제가 있는가
	- 작업 일정 중에 실수로 작업을 중단했거나 종속성 트리에 잘못 배치한 적이 있는가

#### TIP
- 데이터 문제를 해결하는 모든 사람이
	- 'ETL' 작업이 수행되는 방법을 이해하고
	- 관련 로그 및 스케줄링 설정 화면에 접근할 수 있어야 함
- airflow를 사용하면 작업 로그를 통해 process간 무엇이 잘못 되었는지 더 잘 파악할 수 있음

### 5. 동료를 활용하기
- 데이터 조직의 가이드
	- 과거 데이터 셋에서 비슷한 문제가 발생한 적이 있는가?
		- 당시 조직은 이런 문제를 조사/해결하기 위해 무엇을 했는가
	- 현재 문제가 있는 데이터셋의 소유자는 누구인가
		- 자세한 사항은 누구에게 문의해야 하는가
	- 현재 문제가 발생하고 있는 데이터셋을 누가 사용하는가
		- 자세한 사항은 누구에게 문의해야 하는가

#### TIP
- 데이터 문제를 해결하는 모든 사람은
	- 데이터셋의 소유권, 사용에 대한 메타데이터에 액세스 할 수 있어야 하며
	- 누구에게 문의해야하는지 알아야 함
- 가이드 문서가 포함된 **데이터 사고 기록**도 유용할 수 있음