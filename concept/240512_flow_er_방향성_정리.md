
## 안건1. 정기 운영 모드시 고려할 점
- 현재 어느정도 초기 모델 작업이 완료된 상태
- 초기 모델 작업 이후 어떻게 작업 스탠스를 가질지 정의 필요
- 정기 배치 구동 시간 조정 (daily/weekly/...)
	- [ ] 05시
	- [ ] 07시
	- [ ] 08시
	- [ ] etc.
- 정기 배포 담당자 정의
	- [ ] 매주 1회
	- [ ] etc.
- PR 작성시 책임 정리
	- [ ] AE
		- 모델 작성
		- 모델간 conflict 해소
	- [ ] DE
		- yaml conflict 해소(PR상에서 바로 진행)

## 안건2. 정기 배포 작업 사항
- [ ] 작업 시나리오
- 현재 main 브랜치 과거 tag 확인(태그가 되어 있는지)
- 한 주 동안 `request` 태그 PR 순회하며 작업
	- PR 본문이 올바르게 작성 되었는가
	- 쿼리 수정이 필요한 부분 확인
		- 파티션 범위가 올바르게 지정되었는가
		- 파티션 컬럼이 마지막에 존재하는가
		- FROM절을 올바로 사용하였는가(w/o ephemeral)
			- ref를 사용하지 않았는지
	- yaml conflict가 발생했을 경우 직접 PR 수정
	- 이외 conflict 발생시 작성자 문의
	- vscode상 query result 확인(정상 쿼리 조회 되는지)
	- 이슈 없을 경우 merge
- release 브랜치 활용(TBD)
	- main -> release checkout
	- release <- feature merge
		- 모델별 airflow 구동 확인
	- stage에서 release 브랜치 테스트?
		- dev/stage가 merge 되지 않도록 제어해야함
		- github 설정에서 merge approve를 받던 식으로 작업하던가..
	- 이부분은 구체화 필요

## 안건 3. On-call
- [ ] 온콜이 필요한가?
	- 현재 업무 방식: 모델 담당자가 확인하거나, 빠르게 대응할 수 있는 사람이 대응
	- 하지만 추후 hourly, minutely가 추가되었을 때 모든 담당자가 깨어 대응하기는 어려움
	- 자유롭게 온콜을 대응한다?
		- 대신, 시간외 시간 대응시, 근무 결과 리포트 상신
		- n분 이라도..
- 온콜이 필요하다면, 하기 업무에 따라 진행
- [ ] 온콜 담당자의 업무
- flow-er-airflow에서 발생한 에러에 대해 확인
- 먼저 이슈 파악, 필요시 모델 담당자에게 문의
- 정규 업무에서 1MD를 제외하여 온콜 업무에 할당
	- 정규 업무 = wdata-engineering/task에 할당한 업무  
- [ ] 온콜 방식
	- [ ] 매일 돌아가면서 진행할지
	- [ ] 한명씩 진행할지, 2명씩 진행할지
- 온콜 예시
	- [https://brunch.co.kr/@hsy110405/21](https://brunch.co.kr/@hsy110405/21)
	- [https://news.hada.io/topic?id=4405](https://news.hada.io/topic?id=4405) -> 온콜이 옵셔널일때

## 안건 4. 현재 모델 의존 구조의 문제점
- daily 배치가 깨지면, weekly, monthly와 같은 주기가 다른 하위 모델의 구동이 **수동적**으로 필요하다
	- clear task downstream 으로 커버되지 않음
	- e.g. 화요일 daily가 깨졌을 때, 필요시 월요일 weekly 구동이 필요함
- 이유?
	- 모델 관계가 파티션별 의존관계가 아니기 때문
	- source check에서 방어가 가능해야 함
		- weekly 구동시, source로 보는 daily의 모든 파티션이 온전한지

### 현재 후속 배치 구동 방법(e.g. daily)
- 아래와 같은 상황이면 daily dag의 clear만 진행
	- daily 배치가 깨졌을 경우, 깨진 배치 복구
	- 이후 연관된 weekly, monthly가 한번도 구동이 되지 않은 경우 
- daily 후속 모델 중 weekly, monthly가 있을 경우 기존에 구동 되었는지 확인
- 구동 되었다면, 복구가 필요하므로 다음과 같이 진행
	- dagrun graph 확인
	- 깨진 daily task와 가장 가까운 weekly, monthly를 수동 clear
- 후속 모델의 자동 복구 방법?
	- airflow 2.4부터 도입된 dataset
	- [ ] DatasetOrTimeSchedule 도입으로 적용이 가능할지?


## 안건5. 어드민 운영
- 어드민이란?
	- [ ] 모델의 관리 및 운영을 모델 작성자가 직접 진행하도록 하는 레이어
	- flow.er의 내부 스택에는 외부에서 접근 불가능 해야함
		- e.g. 모델 작성자의 airflow 접근
	- 알림을 보고 AE가 알아서 대응하도록 한다면?
		- 대신 그 알림이 분석가가 보기에 친화적이어야 함
		- 개발자 알람 말고, 이를 래핑하는 레이어 필요
- 어드민의 기능은 무엇인가?
	- 백필 어드민
		- [ ] 본인의 백필 가능한 모델 확인
			- vault에서 발급받은 권한을 가지고 구동 가능한 모델..을 구분할 수 있나?
		- [ ] 모델의 백필 수행
		- [ ] 모델의 백필 현황 확인